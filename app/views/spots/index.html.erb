<%# a div for the page %>
<div class="container d-flex parent">
  <%# a div for search bar & cards %>
  <div class="container">
    <%# a div for search bar %>
    <div class="container">
      <%= form_tag spots_path, method: :get, class: "my-4 d-flex align-items-center justify-content-center" do %>
        <%= hidden_field_tag :query,
          params[:query]
        %>
        <div class="range-slider custom-form d-flex align-items-center justify-content-center">
          <p class="my-0 mx-1">0</p>
          <input class="range-slider__range" name="distance" type="range" value="<%= params[:distance].presence || "100" %>" min="0" max="100">
          <span class="range-slider__value">0</span>
          <p class="my-0 mx-1">km</p>
        </div>
        <%= submit_tag "Update radius", class: "my-3 ml-2 btn btn-danger" %>
      <% end %>
    </div>
    <%# a div for cards %>
    <div class="container text-dark">
        <% @spots.each do |spot| %>
        <div class="card-spot">
          <%# <%=  link_to spot_path(spot), class: "text-decoration-none text-dark" do %>
          <div class="card-spot-top">
              <h2><%= spot.name %></h2>
            <div class="card-spot-top-rating">
              <%spot.forecasts.first.rating.times do %>
              <i class="fas fa-star"></i>
              <% end %>
            </div>
          </div>
            <div class="card-spot-info">
              <div>
                <p><i class="fas fa-water"></i> <%= spot.forecasts.first.wave_height/100.to_f%>m</p>
              </div>
              <div>
                <p><i class="fas fa-location-arrow" style="transform: rotate(<%= spot.forecasts.first.wind_direction %>deg); -ms-transform: rotate(<%= spot.forecasts.first.wind_direction %>deg); -webkit-transform: rotate(<%= spot.forecasts.first.wind_direction %>deg);"></i>
                <%= spot.forecasts.first.wind_speed %>kn
                </p>
              </div>
              <div>
                <p><i class="fas fa-route"></i> <%=spot.distance_to(@query_coordinates).to_i%>km</p>
              </div>
            </div>
        </div>
        <% end %>
    </div>
  </div>
  <%# a div for the map %>
  <div class="container text-dark">
    <div class="text-center">
      <div id="map"
        style="width: 100%; height: 100vh; position:sticky; top:0px;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
</div>
